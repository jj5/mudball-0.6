#!/usr/bin/env php
<?php


////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// 2021-02-27 jj5 - include dependencies...
//

require_once __DIR__ . '/../../../../host/dev/test.php';
require_once __DIR__ . '/mud_object.php';


////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// 2021-02-27 jj5 - declare tests...
//

declare_tests([


  //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  // 2024-07-30 jj5 - money
  //

  'parse-money' => function() {

    $tests = [
        [   '$1000.50',  100050 ],
        [   '$1000.00',  100000 ],
        [   '$1000.0' ,  100000 ],
        [   '$1000.00',  100000 ],
        [      '$0.01',       1 ],
        [      '$0.00',       0 ],
        [      '$1',        100 ],
        [  '-$1000',    -100000 ],
        [  '-$1000.0',  -100000 ],
        [  '-$1000.00', -100000 ],
        [     '-$0.01',      -1 ],
        [     '-$1',       -100 ],
        [   '$1000',     100000 ],
        [   '$1000.0',   100000 ],
        [   '$1000.00',  100000 ],
        [      '$0.01',       1 ],
        [      '$1',        100 ],
        [       '$.99',      99 ],
        [      '-$.99',     -99 ],
        [     '$99.',      9900 ],
        [  '$00099.',      9900 ],
        [ '-$00099.',     -9900 ],
        [    '$000',          0 ],
    ];

    foreach ( $tests as $test ) {

      $input = $test[ 0 ];
      $expected = $test[ 1 ];

      $actual = mud_parse_money( $input );

      assert( $actual === $expected, "mud_parse_money( '$input' ) === $expected" );

    }

    return 0;

  },

]);
